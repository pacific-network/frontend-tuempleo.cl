<!DOCTYPE html>
<html lang="en">

<head>
    <!-- meta tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <title>Registro Candidato</title>

    <link rel="icon" type="image/x-icon" href="assets/img/logo/favicon.png">

    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/all-fontawesome.min.css">
    <link rel="stylesheet" href="assets/css/feather.min.css">
    <link rel="stylesheet" href="assets/css/flaticon.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/nice-select.min.css">
    <link rel="stylesheet" href="assets/css/style.css">

</head>

<body>
    <div class="preloader">
        <div class="loader">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
    <div id="header-placeholder"></div>
    <main class="main">
        <div class="site-breadcrumb">
            <div class="container">
                <h2 class="breadcrumb-title">Ingresa tus Datos</h2>
                <ul class="breadcrumb-menu">
                    <li><a href="index.html">Registro</a></li>
                    <li class="active">Ingresa tus Datos</li>
                </ul>
            </div>
            <div class="hero-shape">
                <img class="hero-shape-1" src="assets/img/shape/03.svg" alt="">
                <img class="hero-shape-2" src="assets/img/shape/05.svg" alt="">
                <img class="hero-shape-3" src="assets/img/shape/06.svg" alt="">
                <img class="hero-shape-4" src="assets/img/shape/07.svg" alt="">
            </div>
        </div>
        <div class="col-lg-12">
            <div class="user-profile-wrapper">
                <div class="user-profile-card">
                    <h4 class="user-profile-card-title">Datos Personales</h4>
                    <div class="profile-resume">
                        <div class="profile-form">
                            <form action="#">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>RUT</label>
                                            <input type="text" class="form-control" placeholder="Ingrese tu RUT">
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <label>Nombre</label>
                                            <input type="text" class="form-control" placeholder="Ingrese Nombre">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>Apellido</label>
                                            <input type="text" class="form-control" placeholder="Ingrese Apellido">
                                        </div>
                                    </div>  
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Correo</label>
                                            <input type="text" class="form-control" placeholder="Correo del Registro (Defecto luego del login)">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                          <label>Número de Contacto</label>
                                          <div class="input-group">
                                            <select class="form-control" style="width: 100px;" id="codigo_pais">
                                              <option disabled selected>Cargando...</option>
                                            </select>
                                            <input type="text" class="form-control" placeholder="Ej: 9 1234 5678" id="numero_telefono">
                                          </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label>Género</label>
                                            <select class="select">
                                                <option value="">Seleccionar género</option>
                                                <option value="1">Masculino</option>
                                                <option value="2">Femenino</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Fecha de nacimiento</label>
                                            <input type="date" class="form-control" placeholder="Ingrese fecha de nacimiento">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Estado Civil</label>
                                            <select class="select">
                                                <option value="">Seleccione Estado</option>
                                                <option value="1">Soltero/a</option>
                                                <option value="2">Casado/a</option>
                                                <option value="3">Viudo/a</option>
                                                <option value="4">Divorciado/a</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="region">Región</label>
                                            <select id="region" class="form-control">
                                                <option value="">Seleccione una región</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="comuna">Comuna</label>
                                            <select id="comuna" class="form-control" disabled>
                                                <option value="">Seleccione una comuna</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Nacionalidad</label>
                                            <input type="text" class="form-control" placeholder="Ingrese nacionalidad">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label>Descripción Biografica</label>
                                            <textarea class="form-control" cols="30" rows="5" placeholder="Escriba una descripción"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <h4 class="col-md-5">Educación</h4>
                                <br>
                                <div id="formacion-container">
                                    <div class="row formacion-entry">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="todas_carreras_chile">Título</label>
                                                <select name="todas_carreras_chile" class="form-control" id="todas_carreras_chile" required>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="instituciones_chile">Institución</label>
                                                <select name="instituciones_chile" class="form-control" id="instituciones_chile" size="1">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="tipo_estudio">Tipo de Estudio</label>
                                                <select class="form-control" id="tipo_estudio" name="tipo_estudio">
                                                    <option value="">-- Selecciona un tipo de estudio --</option>
                                                    <option value="primario">Primario</option>
                                                    <option value="secundario">Secundario</option>
                                                    <option value="cft">CFT</option>
                                                    <option value="tecnico">Técnico</option>
                                                    <option value="superior">Superior</option>
                                                    <option value="universitario">Universitario</option>
                                                    <option value="postgrado">Postgrado</option>
                                                    <option value="doctorado">Doctorado</option>
                                                    <option value="otro">Otro</option>
                                                </select>
                                            </div>
                                        </div>                                    
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>Estado</label>
                                                <select class="form-control" name="estado_estudio[]" onchange="toggleAnioFinalizacion(this)">
                                                    <option value="">Seleccione Estado</option>
                                                    <option value="en_curso">En Curso</option>
                                                    <option value="graduado">Graduado</option>
                                                    <option value="abandonado">Abandonado</option> 
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-3">
                                            <div class="form-group anio-finalizacion-group" style="display: none;">
                                                <label>Año de Finalización</label>
                                                <input type="text" class="form-control" name="anio_finalizacion[]" placeholder="Ingrese año finalización">
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-12 text-end mb-3">
                                            <button type="button" class="btn btn-danger btn-sm remove-formacion-btn" onclick="removeFormacion(this)">
                                                <span class="far fa-trash-alt"></span> Eliminar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 mt-3">
                                    <div class="form-group">
                                        <button type="button" class="theme-btn theme-btn2" id="addFormacionBtn">
                                            <span class="far fa-plus"></span> Añadir más formación
                                        </button>
                                    </div>
                                </div>
                                <h4 class="col-md-5">Experiencia</h4>
                                <br>
                                <div id="experiencia-container">
                                    <div class="row exp-entry">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Empresa</label>
                                                <input type="text" class="form-control" placeholder="Ingrese nombre Empresa">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Cargo</label>
                                                <input type="text" class="form-control" placeholder="Ingrese Cargo">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Actividad Empresa</label>
                                                <select class="form-control" name="actividad_empresa" id="actividad_empresa_select">
                                                </select>
                                            </div>
                                        </div>                                    
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label for="nivel_experiencia">Nivel de Experiencia</label>
                                                <select class="form-control" id="nivel_experiencia" name="nivel_experiencia">
                                                    <option value="">-- Selecciona un nivel --</option>
                                                    <option value="practicante">Practicante</option>
                                                    <option value="trainee">Trainee</option>
                                                    <option value="junior">Junior</option>
                                                    <option value="semi_senior">Semi Senior</option>
                                                    <option value="senior">Senior</option>
                                                    <option value="lead">Líder Técnico / Lead</option>
                                                    <option value="manager">Manager</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>Área del Cargo</label>
                                                <select class="form-control" name="area_cargo" id="area_cargo_select">
                                                </select>
                                            </div>
                                        </div>                                                                                                       
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>Mes - Año Inicio</label>
                                                <div class="d-flex gap-2">
                                                    <select class="form-control" name="mes_inicio">
                                                        <option value="">Mes</option>
                                                        <option value="01">Enero</option>
                                                        <option value="02">Febrero</option>
                                                        <option value="03">Marzo</option>
                                                        <option value="04">Abril</option>
                                                        <option value="05">Mayo</option>
                                                        <option value="06">Junio</option>
                                                        <option value="07">Julio</option>
                                                        <option value="08">Agosto</option>
                                                        <option value="09">Septiembre</option>
                                                        <option value="10">Octubre</option>
                                                        <option value="11">Noviembre</option>
                                                        <option value="12">Diciembre</option>
                                                    </select>
                                                    <select class="form-control" name="anio_termino">
                                                        <option value="">Año</option>
                                                        <option value="2025">2025</option>
                                                        <option value="2024">2024</option>
                                                        <option value="2023">2023</option>
                                                        <option value="2022">2022</option>
                                                        <option value="2021">2021</option>
                                                        <option value="2020">2020</option>
                                                        <option value="2019">2019</option>
                                                        <option value="2018">2018</option>
                                                        <option value="2017">2017</option>
                                                        <option value="2016">2016</option>
                                                        <option value="2015">2015</option>
                                                        <option value="2014">2014</option>
                                                        <option value="2013">2013</option>
                                                        <option value="2012">2012</option>
                                                        <option value="2011">2011</option>
                                                        <option value="2010">2010</option>
                                                        <option value="2009">2009</option>
                                                        <option value="2008">2008</option>
                                                        <option value="2007">2007</option>
                                                        <option value="2006">2006</option>
                                                        <option value="2005">2005</option>
                                                        <option value="2004">2004</option>
                                                        <option value="2003">2003</option>
                                                        <option value="2002">2002</option>
                                                        <option value="2001">2001</option>
                                                        <option value="2000">2000</option>
                                                        <option value="1999">1999</option>
                                                        <option value="1998">1998</option>
                                                        <option value="1997">1997</option>
                                                        <option value="1996">1996</option>
                                                        <option value="1995">1995</option>
                                                        <option value="1994">1994</option>
                                                        <option value="1993">1993</option>
                                                        <option value="1992">1992</option>
                                                        <option value="1991">1991</option>
                                                        <option value="1990">1990</option>
                                                        <option value="1989">1989</option>
                                                        <option value="1988">1988</option>
                                                        <option value="1987">1987</option>
                                                        <option value="1986">1986</option>
                                                        <option value="1985">1985</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>Mes - Año Término</label>
                                                <div class="d-flex gap-2">
                                                    <select class="form-control" name="mes_termino">
                                                        <option value="">Mes</option>
                                                        <option value="01">Enero</option>
                                                        <option value="02">Febrero</option>
                                                        <option value="03">Marzo</option>
                                                        <option value="04">Abril</option>
                                                        <option value="05">Mayo</option>
                                                        <option value="06">Junio</option>
                                                        <option value="07">Julio</option>
                                                        <option value="08">Agosto</option>
                                                        <option value="09">Septiembre</option>
                                                        <option value="10">Octubre</option>
                                                        <option value="11">Noviembre</option>
                                                        <option value="12">Diciembre</option>
                                                        <option value="13">Actualmente</option>
                                                    </select>
                                                    <select class="form-control" name="anio_termino">
                                                        <option value="">Año</option>
                                                        <option value="Actualmente">Actualmente</option>
                                                        <option value="2025">2025</option>
                                                        <option value="2024">2024</option>
                                                        <option value="2023">2023</option>
                                                        <option value="2022">2022</option>
                                                        <option value="2021">2021</option>
                                                        <option value="2020">2020</option>
                                                        <option value="2019">2019</option>
                                                        <option value="2018">2018</option>
                                                        <option value="2017">2017</option>
                                                        <option value="2016">2016</option>
                                                        <option value="2015">2015</option>
                                                        <option value="2014">2014</option>
                                                        <option value="2013">2013</option>
                                                        <option value="2012">2012</option>
                                                        <option value="2011">2011</option>
                                                        <option value="2010">2010</option>
                                                        <option value="2009">2009</option>
                                                        <option value="2008">2008</option>
                                                        <option value="2007">2007</option>
                                                        <option value="2006">2006</option>
                                                        <option value="2005">2005</option>
                                                        <option value="2004">2004</option>
                                                        <option value="2003">2003</option>
                                                        <option value="2002">2002</option>
                                                        <option value="2001">2001</option>
                                                        <option value="2000">2000</option>
                                                        <option value="1999">1999</option>
                                                        <option value="1998">1998</option>
                                                        <option value="1997">1997</option>
                                                        <option value="1996">1996</option>
                                                        <option value="1995">1995</option>
                                                        <option value="1994">1994</option>
                                                        <option value="1993">1993</option>
                                                        <option value="1992">1992</option>
                                                        <option value="1991">1991</option>
                                                        <option value="1990">1990</option>
                                                        <option value="1989">1989</option>
                                                        <option value="1988">1988</option>
                                                        <option value="1987">1987</option>
                                                        <option value="1986">1986</option>
                                                        <option value="1985">1985</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>                                                                        
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Descripción del Cargo</label>
                                                <textarea class="form-control" cols="30" rows="5" placeholder="Escriba una descripción"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-md-12 text-end mb-3">
                                            <button type="button" class="btn btn-danger btn-sm remove-exp-btn" onclick="removeExperience(this)">
                                                <span class="far fa-trash-alt"></span> Eliminar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 mt-3">
                                    <div class="form-group">
                                        <button type="button" class="theme-btn theme-btn2" id="addExpBtn">
                                            <span class="far fa-plus"></span> Añadir más experiencia
                                        </button>
                                    </div>
                                </div>
                                <div id="idiomas-container">
                                    <div class="row idioma-entry">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Idioma</label>
                                                <input type="text" class="form-control" name="idioma[]" placeholder="Ej: Español, Inglés, Alemán" required>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Nivel escrito</label>
                                                <select class="form-control" name="nivel_escrito[]">
                                                    <option value="">Seleccione nivel</option>
                                                    <option value="basico">Básico</option>
                                                    <option value="intermedio">Intermedio</option>
                                                    <option value="avanzado">Avanzado</option>
                                                    <option value="experto">Experto</option>
                                                    <option value="nativo">Nativo</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Nivel oral</label>
                                                <select class="form-control" name="nivel_oral[]">
                                                    <option value="">Seleccione nivel</option>
                                                    <option value="basico">Básico</option>
                                                    <option value="intermedio">Intermedio</option>
                                                    <option value="avanzado">Avanzado</option>
                                                    <option value="experto">Experto</option>
                                                    <option value="nativo">Nativo</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-12 text-end mb-3">
                                            <button type="button" class="btn btn-danger btn-sm remove-idioma-btn">
                                                <span class="far fa-trash-alt"></span> Eliminar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-12 mt-3">
                                    <div class="form-group">
                                        <button type="button" class="theme-btn theme-btn2" id="addIdiomaBtn">
                                            <span class="far fa-plus"></span> Añadir más idiomas
                                        </button>
                                    </div>
                                </div>
                                <h4 class="col-md-5">Preferencias</h4>
                                <br>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>Categoría</label>
                                            <input type="text" class="form-control" placeholder="Ingrese Empleo Deseado">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>Salario esperado</label>
                                            <div style="position: relative;">
                                                <span style="position: absolute; top: 50%; left: 10px; transform: translateY(-50%); font-weight: bold;">$</span>
                                                <input type="text" class="form-control" placeholder="Ej: 800.000" name="salario"
                                                       style="padding-left: 25px;">
                                            </div>
                                        </div>
                                    </div>                                                                                                          
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>Modalidad</label>
                                            <select class="form-control" name="modalidad">
                                                <option value="">Seleccione una opción</option>
                                                <option value="presencial">Presencial</option>
                                                <option value="online">Online</option>
                                                <option value="hibrida">Híbrida</option>
                                                <option value="part-time">Part-Time</option>
                                                <option value="full-time">Full-Time</option>
                                                <option value="freelance">Freelance</option>
                                                <option value="remoto">Remoto</option>
                                            </select>
                                        </div>
                                    </div>                                    
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label>Herramientas</label>
                                            <input type="text" class="form-control" placeholder="Ingrese herramientas (Max 10 Herramientas). Ejemplo: Excel - Word - PowerBi">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <h6 class="mb-3">Enlaces sociales</h6>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>URL de Facebook</label>
                                            <input type="text" class="form-control" placeholder="https://www.facebook.com/">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>URL de Twitter</label>
                                            <input type="text" class="form-control" placeholder="https://www.twitter.com/">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>URL de Linkedin</label>
                                            <input type="text" class="form-control" placeholder="https://www.linkedin.com/">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>URL de Instagram</label>
                                            <input type="text" class="form-control" placeholder="https://www.instagram.com/">
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-group mt-3">
                                            <button type="submit" class="theme-btn"><span class="far fa-paper-plane"></span> Enviar tu currículum</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="footer-placeholder">

    <a href="#" id="scroll-top"><i class="far fa-angle-up"></i></a>

    <script src="assets/js/jquery-3.6.0.min.js"></script>
    <script src="assets/js/modernizr.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/imagesloaded.pkgd.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <script src="assets/js/jquery.appear.min.js"></script>
    <script src="assets/js/jquery.easing.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/counter-up.js"></script>
    <script src="assets/js/masonry.pkgd.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/nice-select.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        const dataUrl = 'https://gist.githubusercontent.com/juanbrujo/0fd2f4d126b3ce5a95a7dd1f28b3d8dd/raw/';
        const regionSelect = document.getElementById('region');
        const comunaSelect = document.getElementById('comuna');
      
        fetch(dataUrl)
          .then(response => response.json())
          .then(data => {
            data.regiones.forEach(region => {
              const option = document.createElement('option');
              option.value = region.region;
              option.textContent = region.region;
              regionSelect.appendChild(option);
            });
      
            regionSelect.addEventListener('change', () => {
              const selectedRegion = regionSelect.value;
              const regionData = data.regiones.find(r => r.region === selectedRegion);
      
              comunaSelect.innerHTML = '<option value="">Seleccione una comuna</option>';
              comunaSelect.disabled = true;
      
              if (regionData?.comunas?.length) {
                regionData.comunas.forEach(comuna => {
                  const option = document.createElement('option');
                  option.value = comuna;
                  option.textContent = comuna;
                  comunaSelect.appendChild(option);
                });
                comunaSelect.disabled = false;
              }
            });
          })
          .catch(error => console.error('Error al cargar los datos:', error));
    </script>
    <script>
        async function cargarCodigosDePais() {
          try {
            const response = await fetch('https://restcountries.com/v3.1/all');
            const data = await response.json();
        
            const select = document.getElementById('codigo_pais');
            select.innerHTML = ''; // limpiar "Cargando..."
        
            // Filtrar solo América y que tengan prefijo telefónico
            const paises = data
              .filter(p => p.region === 'Americas' && p.idd && p.idd.root)
              .map(p => {
                const root = p.idd.root || '';
                const suffixes = p.idd.suffixes || [''];
                return suffixes.map(suffix => ({
                  nombre: p.name.common,
                  codigo: root + suffix,
                  bandera: p.flag,
                  iso2: p.cca2
                }));
              })
              .flat();
          
            paises.sort((a, b) => a.nombre.localeCompare(b.nombre));
          
            for (const pais of paises) {
              const option = document.createElement('option');
              option.value = pais.codigo;
              option.textContent = `${pais.bandera} ${pais.codigo} (${pais.nombre})`;
            
              if (pais.nombre === 'Chile') {
                option.selected = true;
              }
          
              select.appendChild(option);
            }
        
          } catch (error) {
            console.error('Error al cargar países:', error);
            const select = document.getElementById('codigo_pais');
            select.innerHTML = '<option disabled>Error al cargar países</option>';
          }
        }
    
        cargarCodigosDePais();
    </script>
    <script src="assets/js/carreras.js"></script>
    <script src="assets/js/instituciones.js"></script>
    <script src="assets/js/header-footer/loadHeaderFooter.js"></script>
    <script src="assets/js/actividad-empresa.js"></script>
    <script src="assets/js/area_cargo.js"></script>
    <script>
        // Solución definitiva para evitar duplicados
        document.getElementById('addIdiomaBtn').addEventListener('click', addIdiomaBlock, {once: true});
        
        function addIdiomaBlock() {
            const container = document.getElementById('idiomas-container');
            const lastEntry = container.querySelector('.idioma-entry:last-child');
            const newEntry = lastEntry.cloneNode(true);
            
            // Limpiar valores
            newEntry.querySelectorAll('input').forEach(el => el.value = '');
            newEntry.querySelectorAll('select').forEach(el => el.value = '');
            
            // Insertar nuevo bloque
            container.appendChild(newEntry);
            
            // Volver a asignar el evento al nuevo botón de eliminar
            newEntry.querySelector('.remove-idioma-btn').addEventListener('click', function() {
                removeIdioma(this);
            });
            
            // Reasignar el evento al botón principal (solo una vez)
            document.getElementById('addIdiomaBtn').addEventListener('click', addIdiomaBlock, {once: true});
            
            // Desplazamiento suave
            newEntry.scrollIntoView({behavior: 'smooth'});
        }
        
        function removeIdioma(button) {
            const container = document.getElementById('idiomas-container');
            if (container.querySelectorAll('.idioma-entry').length > 1) {
                button.closest('.idioma-entry').remove();
            } else {
                alert("Debe mantener al menos un idioma");
            }
        }
        
        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            // Asignar evento al primer botón eliminar
            document.querySelector('.remove-idioma-btn').addEventListener('click', function() {
                removeIdioma(this);
            });
        });
    </script>
    <script>
        // Manejar selección de "Actualmente"
        function handleActualmente(selectElement) {
            const yearSelect = selectElement.closest('.d-flex').querySelector('[name="anio_termino[]"]');
            yearSelect.disabled = (selectElement.value === 'actual');
            if (selectElement.value === 'actual') {
                yearSelect.value = '';
            }
        }
        
        // Eliminar experiencia
        function removeExperience(button) {
            const entryToRemove = button.closest('.exp-entry');
            if (document.querySelectorAll('.exp-entry').length > 1) {
                entryToRemove.remove();
            } else {
                alert("Debe mantener al menos una experiencia");
            }
        }
        
        // Añadir nueva experiencia
        document.getElementById('addExpBtn').addEventListener('click', function() {
            const container = document.getElementById('experiencia-container');
            const lastEntry = container.querySelector('.exp-entry:last-child');
            const newEntry = lastEntry.cloneNode(true);
            
            // Limpiar valores
            newEntry.querySelectorAll('input').forEach(el => el.value = '');
            newEntry.querySelectorAll('select').forEach(el => {
                el.value = '';
                el.disabled = false; // Asegurar que no esté disabled
            });
            newEntry.querySelectorAll('textarea').forEach(el => el.value = '');
            
            // Insertar después del último elemento
            container.appendChild(newEntry);
            
            // Desplazarse suavemente al nuevo elemento
            newEntry.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });
        
        // Inicializar tooltips para botones de eliminar
        document.addEventListener('DOMContentLoaded', function() {
            [].slice.call(document.querySelectorAll('.remove-exp-btn')).forEach(function(button) {
                new bootstrap.Tooltip(button, {
                    placement: 'top'
                });
            });
        });
    </script>
    <script>
        // Mostrar/ocultar año de finalización según estado
        function toggleAnioFinalizacion(selectElement) {
            const anioGroup = selectElement.closest('.formacion-entry').querySelector('.anio-finalizacion-group');
            if (selectElement.value === 'graduado' || selectElement.value === 'abandonado') {
                anioGroup.style.display = 'block';
            } else {
                anioGroup.style.display = 'none';
                anioGroup.querySelector('input').value = '';
            }
        }
        
        // Eliminar formación
        function removeFormacion(button) {
            const entryToRemove = button.closest('.formacion-entry');
            if (document.querySelectorAll('.formacion-entry').length > 1) {
                entryToRemove.remove();
            } else {
                alert("Debe mantener al menos un registro de formación");
            }
        }
        
        // Añadir nueva formación
        document.getElementById('addFormacionBtn').addEventListener('click', function() {
            const container = document.getElementById('formacion-container');
            const lastEntry = container.querySelector('.formacion-entry:last-child');
            const newEntry = lastEntry.cloneNode(true);
            
            // Limpiar valores
            newEntry.querySelectorAll('input').forEach(el => el.value = '');
            newEntry.querySelectorAll('select').forEach(el => {
                el.value = '';
                // Resetear visibilidad del año de finalización
                if (el.name.includes('estado_estudio')) {
                    const anioGroup = newEntry.querySelector('.anio-finalizacion-group');
                    anioGroup.style.display = 'none';
                }
            });
            
            // Insertar después del último elemento
            container.appendChild(newEntry);
            
            // Desplazarse suavemente al nuevo elemento
            newEntry.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });
        
        // Inicializar tooltips para botones de eliminar
        document.addEventListener('DOMContentLoaded', function() {
            [].slice.call(document.querySelectorAll('.remove-formacion-btn')).forEach(function(button) {
                new bootstrap.Tooltip(button, {
                    placement: 'top'
                });
            });
        });
    </script>
    
</body>

</html>